#!/usr/bin/env node
const fs = require('fs');
const child_process = require('child_process');

const type = process.argv[2] || 'blank';
const bpDirPath = `./src/bp-${type}`;
if (!fs.existsSync(bpDirPath)) {
  console.error(`Boilerplate does not exists in ${bpDirPath}`);
  process.exit(1);
}

const experiments = fs.readdirSync('./src').filter((name) => {
  const stat = fs.statSync(`./src/${name}`);
  if (!stat.isDirectory()) return false;
  return !isNaN(Number(name));
});
const newId = parseInt(experiments[experiments.length - 1], 10) + 1;
const newIdString = (`000${newId}`).slice(-3);

child_process.execSync(`cp -r ${bpDirPath} ./src/${newIdString}`);
